â— ğŸ” PhÃ¢n TÃ­ch Ká»¹ Thuáº­t Thuáº­t ToÃ¡n Chá»n Thuáº­t ToÃ¡n

  ğŸ“Š Kiáº¿n TrÃºc Tá»•ng Quan

  Thuáº­t toÃ¡n hoáº¡t Ä‘á»™ng theo pipeline 3 bÆ°á»›c:
  1. PhÃ¢n tÃ­ch Ä‘á»™ liÃªn quan (analyzeQuestionRelevance)
  2. PhÃ¢n loáº¡i cÃ¢u há»i (categorizeQuestion)
  3. Ra quyáº¿t Ä‘á»‹nh (selectAlgorithm)

  ---
  ğŸ§  BÆ°á»›c 1: PhÃ¢n TÃ­ch Äá»™ LiÃªn Quan (Relevance Analysis)

  Input: CÃ¢u há»i ngÆ°á»i dÃ¹ngOutput: relevanceScore, tá»« khÃ³a trÃ¹ng khá»›p,     
   chá»§ Ä‘á» liÃªn quan

  CÃ´ng Thá»©c TÃ­nh Äiá»ƒm (Relevance Score):

  relevanceScore = keyword_score + topic_score + vocabulary_score

  Trong Ä‘Ã³:
  - keyword_score = Î£(matched_important_keywords) Ã— 3
  - topic_score = Î£(common_words_with_titles) Ã— 2
  - vocabulary_score = Î£(partial_keyword_matches) Ã— 1

  VÃ­ Dá»¥ TÃ­nh ToÃ¡n:

  CÃ¢u há»i: "Machine learning algorithms lÃ  gÃ¬?"

  1. Keyword matching:
     - "machine learning" âˆˆ important_keywords â†’ +3 Ä‘iá»ƒm
     - "algorithms" âˆˆ important_keywords â†’ +3 Ä‘iá»ƒm

  2. Topic matching:
     - So vá»›i title "Machine Learning cÆ¡ báº£n":
       - Common words: ["machine", "learning"] â†’ +4 Ä‘iá»ƒm (2Ã—2)

  3. Vocabulary matching:
     - "algorithms" partial match vá»›i "algorithm" â†’ +1 Ä‘iá»ƒm

  Total relevanceScore = 3 + 3 + 4 + 1 = 11

  Threshold Logic:

  - relevanceScore > 2 â†’ isKnowledgeRelated = true
  - Äiá»ƒm cao â†’ CÃ³ liÃªn quan Ä‘áº¿n kiáº¿n thá»©c Ä‘Ã£ há»c

  ---
  ğŸ·ï¸ BÆ°á»›c 2: PhÃ¢n Loáº¡i CÃ¢u Há»i (Question Categorization)

  Sá»­ dá»¥ng Regex Pattern Matching:

  patterns = {
    definition: /^(.*)(lÃ  gÃ¬|what is|nghÄ©a lÃ  gÃ¬|Ä‘á»‹nh nghÄ©a|khÃ¡i
  niá»‡m)/,
    explanation: /^(táº¡i sao|why|lÃ m tháº¿ nÃ o|how|giáº£i thÃ­ch)/,
    comparison: /^(so sÃ¡nh|khÃ¡c nhau|giá»‘ng|compare)/,
    procedure: /^(cÃ¡ch lÃ m|how to|lÃ m sao|quy trÃ¬nh)/,
    conversational: /^(chÃ o|hello|hi|cáº£m Æ¡n|thank)/,
    // ...
  }

  PhÃ¢n Loáº¡i Äá»™ Phá»©c Táº¡p:
  - length > 50 â†’ complex
  - length > 20 â†’ medium
  - length â‰¤ 20 â†’ simple

  XÃ¡c Äá»‹nh Context Requirements:
  - Types cáº§n context: ['definition', 'explanation', 'comparison',
  'procedure']

  ---
  âš¡ BÆ°á»›c 3: Decision Tree Logic

  if (isConversational):
      return 'direct' (confidence: 0.9)

  elif (isKnowledgeRelated AND relevanceScore > 5):
      if (matchedKeywords > 2 OR needsContext):
          return 'context' (confidence: 0.85)  # Score-based
      else:
          return 'embedding' (confidence: 0.8)  # RAG-based

  elif (isKnowledgeRelated AND relevanceScore > 2):
      return 'embedding' (confidence: 0.7)  # Try RAG

  else:
      return 'direct' (confidence: 0.8)  # No knowledge match

  ---
  ğŸ“ˆ CÃ¡c Thuáº­t ToÃ¡n ÄÆ°á»£c Chá»n

  1. Score Context (context)

  - Khi: Nhiá»u tá»« khÃ³a trÃ¹ng khá»›p (>2) HOáº¶C cáº§n context Ä‘á»‹nh nghÄ©a
  - Æ¯u Ä‘iá»ƒm: Nhanh, chÃ­nh xÃ¡c vá»›i tá»« khÃ³a rÃµ rÃ ng
  - CÆ¡ cháº¿: TÃ­nh Ä‘iá»ƒm dá»±a trÃªn keyword matching, title similarity

  2. RAG Embedding (embedding)

  - Khi: CÃ³ liÃªn quan nhÆ°ng Ã­t tá»« khÃ³a trá»±c tiáº¿p
  - Æ¯u Ä‘iá»ƒm: TÃ¬m Ä‘Æ°á»£c content tÆ°Æ¡ng tá»± ngá»¯ nghÄ©a
  - CÆ¡ cháº¿: Vector similarity search vá»›i cosine distance

  3. Direct Mode (direct)

  - Khi: CÃ¢u trÃ² chuyá»‡n HOáº¶C khÃ´ng liÃªn quan kiáº¿n thá»©c
  - Æ¯u Ä‘iá»ƒm: Linh hoáº¡t, dÃ¹ng AI trá»±c tiáº¿p
  - CÆ¡ cháº¿: GPT vá»›i conversation history

  ---
  ğŸ¯ Äá»™ Tin Cáº­y (Confidence Scoring)

  Confidence levels:
  - 0.9: Conversational (ráº¥t cháº¯c cháº¯n)
  - 0.85: Context vá»›i nhiá»u keywords (cháº¯c cháº¯n)
  - 0.8: Embedding hoáº·c Direct vá»›i logic rÃµ rÃ ng
  - 0.7: Embedding vá»›i Ã­t evidence (thá»­ nghiá»‡m)
  - 0.5: Fallback/error cases

  ---
  ğŸ”§ Tá»‘i Æ¯u HÃ³a & Äiá»ƒm Máº¡nh

  Äiá»ƒm Máº¡nh:

  1. Multi-criteria Decision: Káº¿t há»£p keyword, semantic, pattern
  matching
  2. Adaptive Thresholds: Äiá»u chá»‰nh Ä‘Æ°á»£c cÃ¡c ngÆ°á»¡ng quyáº¿t Ä‘á»‹nh
  3. Fallback Mechanism: LuÃ´n cÃ³ thuáº­t toÃ¡n backup
  4. Logging & Analytics: Track decisions Ä‘á»ƒ cáº£i thiá»‡n
  5. Language Agnostic: Há»— trá»£ cáº£ tiáº¿ng Viá»‡t vÃ  tiáº¿ng Anh

  Complexity Analysis:

  - Time Complexity: O(K + T + W)
    - K: sá»‘ keywords, T: sá»‘ titles, W: sá»‘ words trong question
  - Space Complexity: O(K + T) cho caching data

  Potential Improvements:

  1. Machine Learning Approach: Train model dá»±a trÃªn historical data       
  2. Dynamic Thresholds: Tá»± Ä‘iá»u chá»‰nh threshold theo performance
  3. Context Window: Xem xÃ©t previous questions trong session
  4. Semantic Embeddings: DÃ¹ng embeddings cho question classification      

  Thuáº­t toÃ¡n hiá»‡n táº¡i cÃ¢n báº±ng tá»‘t giá»¯a Ä‘Æ¡n giáº£n, hiá»‡u quáº£ vÃ  chÃ­nh        
  xÃ¡c cho use case cá»§a chatbot tri thá»©c.